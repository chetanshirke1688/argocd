--- 
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata: 
  name: k8s-jobs-poc
spec: 
  entrypoint: pi-tmpl
  templates: 
    - 
      name: pi-tmpl
      resource: 
        action: create
        failureCondition: "status.failed > 3"
        manifest: |
            apiVersion: apps/v1
            kind: Deployment
            metadata: 
              labels: 
                app: spring-boot-app
              name: spring-boot-app
            spec: 
              replicas: 1
              selector: 
                matchLabels: 
                  app: spring-boot-app
              template: 
                metadata: 
                  labels: 
                    app: spring-boot-app
                spec: 
                  containers: 
                    - 
                      image: gazgeek/springboot-helloworld
                      imagePullPolicy: IfNotPresent
                      name: springboot-helloworld
                      ports: 
                        - 
                          containerPort: 9080
        successCondition: "status.succeeded > 0"
